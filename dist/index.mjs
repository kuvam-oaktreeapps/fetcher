var j=Object.defineProperty;var m=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var P=(c,n,e)=>n in c?j(c,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[n]=e,L=(c,n)=>{for(var e in n||(n={}))x.call(n,e)&&P(c,e,n[e]);if(m)for(var e of m(n))A.call(n,e)&&P(c,e,n[e]);return c};var b=(c,n,e)=>new Promise((T,s)=>{var R=u=>{try{h(e.next(u))}catch(t){s(t)}},D=u=>{try{h(e.throw(u))}catch(t){s(t)}},h=u=>u.done?T(u.value):Promise.resolve(u.value).then(R,D);h((e=e.apply(c,n)).next())});import{useEffect as C,useState as d}from"react";var w=class{constructor(n,e){this.baseUrl=n,this.headers=()=>L({"Content-Type":"application/json",Accept:"application/json"},e==null?void 0:e())}useGET(n,e){let[T,s]=d(null),[R,D]=d(null),[h,u]=d(!0),t=()=>b(this,null,function*(){var i,E,f,g,S,y;let l=null,a=null;u(!0),(i=e==null?void 0:e.onLoadingStart)==null||i.call(e);let r=yield fetch(this.baseUrl+n,{headers:L(L({},(E=this.headers)==null?void 0:E.call(this)),e==null?void 0:e.headers)});if(r.status.toString().startsWith("2"))try{l=yield r.json(),s(l),(f=e==null?void 0:e.onSuccess)==null||f.call(e,l)}catch(U){l=yield r.text(),s(l),(g=e==null?void 0:e.onSuccess)==null||g.call(e,l)}else a={status:r.status,fetchResponse:r},D(a),(S=e==null?void 0:e.onError)==null||S.call(e,a);return u(!1),(y=e==null?void 0:e.onLoadingEnd)==null||y.call(e),{data:l,error:a}});return C(()=>{t()},[]),{data:T,isError:R,isLoading:h,refetchData:t}}usePOST(n,e){let[T,s]=d(null),[R,D]=d(null),[h,u]=d(!1);return{postData:l=>b(this,null,function*(){var E,f,g,S,y,U;let a=null,r=null;u(!0),(E=e==null?void 0:e.onLoadingStart)==null||E.call(e);let i=yield fetch(this.baseUrl+n,{method:"POST",headers:L(L({},(f=this.headers)==null?void 0:f.call(this)),e==null?void 0:e.headers),body:JSON.stringify(l)});if(i.status.toString().startsWith("2"))try{a=yield i.json(),s(a),(g=e==null?void 0:e.onSuccess)==null||g.call(e,a)}catch(O){a=yield i.text(),s(a),(S=e==null?void 0:e.onSuccess)==null||S.call(e,a)}else r={status:i.status,fetchResponse:i},D(r),(y=e==null?void 0:e.onError)==null||y.call(e,r);return u(!1),(U=e==null?void 0:e.onLoadingEnd)==null||U.call(e),{data:a,error:r}}),isError:R,isLoading:h,data:T}}useDELETE(n){let[e,T]=d(null),[s,R]=d(null),[D,h]=d(!1);return{isError:s,isLoading:D,deleteData:t=>b(this,null,function*(){var i,E,f,g,S,y;let l=null,a=null;h(!0),(i=n==null?void 0:n.onLoadingStart)==null||i.call(n);let r=yield fetch(this.baseUrl+t,{method:"DELETE",headers:L(L({},(E=this.headers)==null?void 0:E.call(this)),n==null?void 0:n.headers)});if(r.status.toString().startsWith("2"))try{l=yield r.json(),T(l),(f=n==null?void 0:n.onSuccess)==null||f.call(n,l)}catch(U){l=yield r.text(),T(l),(g=n==null?void 0:n.onSuccess)==null||g.call(n,l)}else a={status:r.status,fetchResponse:r},R(a),(S=n==null?void 0:n.onError)==null||S.call(n,a);return h(!1),(y=n==null?void 0:n.onLoadingEnd)==null||y.call(n),{data:l,error:a}}),data:e}}usePATCH(n){let[e,T]=d(null),[s,R]=d(null),[D,h]=d(!1);return{patchData:(t,l)=>b(this,null,function*(){var E,f,g,S,y,U;let a=null,r=null;h(!0),(E=n==null?void 0:n.onLoadingStart)==null||E.call(n);let i=yield fetch(this.baseUrl+t,{method:"PATCH",headers:L(L({},(f=this.headers)==null?void 0:f.call(this)),n==null?void 0:n.headers),body:JSON.stringify(l)});if(i.status.toString().startsWith("2"))try{let O=yield i.json();T(O),(g=n==null?void 0:n.onSuccess)==null||g.call(n,O)}catch(O){a=yield i.text(),T(a),(S=n==null?void 0:n.onSuccess)==null||S.call(n,a)}else r={status:i.status,fetchResponse:i},R(r),(y=n==null?void 0:n.onError)==null||y.call(n,r);return h(!1),(U=n==null?void 0:n.onLoadingEnd)==null||U.call(n),{data:a,error:r}}),isError:s,isLoading:D,data:e}}},G=c=>new w(c.baseUrl,c.headers);export{G as createFetcher};
