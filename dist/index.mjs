var P=Object.defineProperty;var D=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var m=(c,n,e)=>n in c?P(c,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[n]=e,E=(c,n)=>{for(var e in n||(n={}))w.call(n,e)&&m(c,e,n[e]);if(D)for(var e of D(n))A.call(n,e)&&m(c,e,n[e]);return c};var S=(c,n,e)=>new Promise((f,s)=>{var l=r=>{try{g(e.next(r))}catch(a){s(a)}},t=r=>{try{g(e.throw(r))}catch(a){s(a)}},g=r=>r.done?f(r.value):Promise.resolve(r.value).then(l,t);g((e=e.apply(c,n)).next())});import{useEffect as C,useState as T}from"react";var U=class{constructor(n,e){this.baseUrl=n,this.headers=e}useGET(n,e){let[f,s]=T(null),[l,t]=T(null),[g,r]=T(!0),a=()=>S(this,null,function*(){var u,h,d,L,O,b;r(!0),(u=e==null?void 0:e.onLoadingStart)==null||u.call(e);let i=yield fetch(this.baseUrl+n,{headers:E(E({},(h=this.headers)==null?void 0:h.call(this)),e==null?void 0:e.headers)});if(i.status.toString().startsWith("2"))try{let R=yield i.json();s(R),(d=e==null?void 0:e.onSuccess)==null||d.call(e,R)}catch(R){let y=yield i.text();s(y),(L=e==null?void 0:e.onSuccess)==null||L.call(e,y)}else t({status:i.status,fetchResponse:i}),(O=e==null?void 0:e.onError)==null||O.call(e,{status:i.status,fetchResponse:i});r(!1),(b=e==null?void 0:e.onLoadingEnd)==null||b.call(e)});return C(()=>{a()},[]),{data:f,isError:l,isLoading:g,refetch:a}}usePOST(n,e){let[f,s]=T(null),[l,t]=T(!1);return{post:r=>S(this,null,function*(){var i,u,h,d,L;t(!0),(i=e==null?void 0:e.onLoadingStart)==null||i.call(e);let a=yield fetch(this.baseUrl+n,{method:"POST",headers:E(E({},(u=this.headers)==null?void 0:u.call(this)),e==null?void 0:e.headers),body:JSON.stringify(r)});a.status.toString().startsWith("2")?(h=e==null?void 0:e.onSuccess)==null||h.call(e):(s({status:a.status,fetchResponse:a}),(d=e==null?void 0:e.onError)==null||d.call(e,{status:a.status,fetchResponse:a})),t(!1),(L=e==null?void 0:e.onLoadingEnd)==null||L.call(e)}),isError:f,isLoading:l}}useDELETE(n){let[e,f]=T(null),[s,l]=T(!1);return{isError:e,isLoading:s,delete:g=>S(this,null,function*(){var a,i,u,h,d;l(!0),(a=n==null?void 0:n.onLoadingStart)==null||a.call(n);let r=yield fetch(this.baseUrl+g,{method:"DELETE",headers:E(E({},(i=this.headers)==null?void 0:i.call(this)),n==null?void 0:n.headers)});r.status.toString().startsWith("2")?(u=n==null?void 0:n.onSuccess)==null||u.call(n):(f({status:r.status,fetchResponse:r}),(h=n==null?void 0:n.onError)==null||h.call(n,{status:r.status,fetchResponse:r})),l(!1),(d=n==null?void 0:n.onLoadingEnd)==null||d.call(n)})}}usePATCH(n,e){let[f,s]=T(null),[l,t]=T(!1);return{patch:r=>S(this,null,function*(){var i,u,h,d,L;t(!0),(i=e==null?void 0:e.onLoadingStart)==null||i.call(e);let a=yield fetch(this.baseUrl+n,{method:"PATCH",headers:E(E({},(u=this.headers)==null?void 0:u.call(this)),e==null?void 0:e.headers),body:JSON.stringify(r)});a.status.toString().startsWith("2")?(h=e==null?void 0:e.onSuccess)==null||h.call(e):(s({status:a.status,fetchResponse:a}),(d=e==null?void 0:e.onError)==null||d.call(e,{status:a.status,fetchResponse:a})),t(!1),(L=e==null?void 0:e.onLoadingEnd)==null||L.call(e)}),isError:f,isLoading:l}}},x=c=>new U(c.baseUrl,c.headers);export{x as createFetcher};
