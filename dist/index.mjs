var P=Object.defineProperty;var b=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var m=(c,n,e)=>n in c?P(c,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[n]=e,f=(c,n)=>{for(var e in n||(n={}))w.call(n,e)&&m(c,e,n[e]);if(b)for(var e of b(n))A.call(n,e)&&m(c,e,n[e]);return c};var S=(c,n,e)=>new Promise((g,u)=>{var s=r=>{try{d(e.next(r))}catch(a){u(a)}},T=r=>{try{d(e.throw(r))}catch(a){u(a)}},d=r=>r.done?g(r.value):Promise.resolve(r.value).then(s,T);d((e=e.apply(c,n)).next())});import{useEffect as C,useState as E}from"react";var U=class{constructor(n,e){this.baseUrl=n,this.headers=()=>f({"Content-Type":"application/json",Accept:"application/json"},e==null?void 0:e())}useGET(n,e){let[g,u]=E(null),[s,T]=E(null),[d,r]=E(!0),a=()=>S(this,null,function*(){var h,l,t,L,y,D;r(!0),(h=e==null?void 0:e.onLoadingStart)==null||h.call(e);let i=yield fetch(this.baseUrl+n,{headers:f(f({},(l=this.headers)==null?void 0:l.call(this)),e==null?void 0:e.headers)});if(i.status.toString().startsWith("2"))try{let R=yield i.json();u(R),(t=e==null?void 0:e.onSuccess)==null||t.call(e,R)}catch(R){let O=yield i.text();u(O),(L=e==null?void 0:e.onSuccess)==null||L.call(e,O)}else T({status:i.status,fetchResponse:i}),(y=e==null?void 0:e.onError)==null||y.call(e,{status:i.status,fetchResponse:i});r(!1),(D=e==null?void 0:e.onLoadingEnd)==null||D.call(e)});return C(()=>{a()},[]),{data:g,isError:s,isLoading:d,refetchData:a}}usePOST(n,e){let[g,u]=E(null),[s,T]=E(!1);return{postData:r=>S(this,null,function*(){var i,h,l,t,L;T(!0),(i=e==null?void 0:e.onLoadingStart)==null||i.call(e);let a=yield fetch(this.baseUrl+n,{method:"POST",headers:f(f({},(h=this.headers)==null?void 0:h.call(this)),e==null?void 0:e.headers),body:JSON.stringify(r)});a.status.toString().startsWith("2")?(l=e==null?void 0:e.onSuccess)==null||l.call(e):(u({status:a.status,fetchResponse:a}),(t=e==null?void 0:e.onError)==null||t.call(e,{status:a.status,fetchResponse:a})),T(!1),(L=e==null?void 0:e.onLoadingEnd)==null||L.call(e)}),isError:g,isLoading:s}}useDELETE(n){let[e,g]=E(null),[u,s]=E(!1);return{isError:e,isLoading:u,deleteData:d=>S(this,null,function*(){var a,i,h,l,t;s(!0),(a=n==null?void 0:n.onLoadingStart)==null||a.call(n);let r=yield fetch(this.baseUrl+d,{method:"DELETE",headers:f(f({},(i=this.headers)==null?void 0:i.call(this)),n==null?void 0:n.headers)});r.status.toString().startsWith("2")?(h=n==null?void 0:n.onSuccess)==null||h.call(n):(g({status:r.status,fetchResponse:r}),(l=n==null?void 0:n.onError)==null||l.call(n,{status:r.status,fetchResponse:r})),s(!1),(t=n==null?void 0:n.onLoadingEnd)==null||t.call(n)})}}usePATCH(n){let[e,g]=E(null),[u,s]=E(!1);return{patchData:(d,r)=>S(this,null,function*(){var i,h,l,t,L;s(!0),(i=n==null?void 0:n.onLoadingStart)==null||i.call(n);let a=yield fetch(this.baseUrl+d,{method:"PATCH",headers:f(f({},(h=this.headers)==null?void 0:h.call(this)),n==null?void 0:n.headers),body:JSON.stringify(r)});a.status.toString().startsWith("2")?(l=n==null?void 0:n.onSuccess)==null||l.call(n):(g({status:a.status,fetchResponse:a}),(t=n==null?void 0:n.onError)==null||t.call(n,{status:a.status,fetchResponse:a})),s(!1),(L=n==null?void 0:n.onLoadingEnd)==null||L.call(n)}),isError:e,isLoading:u}}},W=c=>new U(c.baseUrl,c.headers);export{W as createFetcher};
