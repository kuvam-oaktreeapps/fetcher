var U=Object.defineProperty;var S=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var O=(n,s,e)=>s in n?U(n,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[s]=e,d=(n,s)=>{for(var e in s||(s={}))b.call(s,e)&&O(n,e,s[e]);if(S)for(var e of S(s))L.call(s,e)&&O(n,e,s[e]);return n};var g=(n,s,e)=>new Promise((u,a)=>{var l=r=>{try{c(e.next(r))}catch(t){a(t)}},i=r=>{try{c(e.throw(r))}catch(t){a(t)}},c=r=>r.done?u(r.value):Promise.resolve(r.value).then(l,i);c((e=e.apply(n,s)).next())});import{useEffect as m,useState as f}from"react";var o=class{constructor(s,e){this.baseUrl=s,this.headers=e}useGET(s,e){let[u,a]=f(null),[l,i]=f(null),[c,r]=f(!1),t=()=>g(this,null,function*(){var T;r(!0),e==null||e.onLoadingStart();let h=yield fetch(this.baseUrl+s,{headers:d(d({},(T=this.headers)==null?void 0:T.call(this)),e==null?void 0:e.headers)});try{let E=yield h.json();a(E)}catch(E){i({status:h.status,fetchResponse:h})}r(!1),e==null||e.onLoadingEnd()});return m(()=>{t()},[]),{data:u,isError:l,isLoading:c,refetch:t}}usePOST(s,e){let[u,a]=f(null),[l,i]=f(!1);return{post:r=>g(this,null,function*(){var h;i(!0),e==null||e.onLoadingStart();let t=yield fetch(this.baseUrl+s,{method:"POST",headers:d(d({},(h=this.headers)==null?void 0:h.call(this)),e==null?void 0:e.headers),body:JSON.stringify(r)});t.status.toString().startsWith("2")?e==null||e.onSuccess():(a({status:t.status,fetchResponse:t}),e==null||e.onError({status:t.status,fetchResponse:t})),i(!1),e==null||e.onLoadingEnd()}),isError:u,isLoading:l}}},D=n=>new o(n.baseUrl,n.headers);export{D as createFetcher};
