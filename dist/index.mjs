var j=Object.defineProperty;var w=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var m=(i,a,e)=>a in i?j(i,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[a]=e,L=(i,a)=>{for(var e in a||(a={}))x.call(a,e)&&m(i,e,a[e]);if(w)for(var e of w(a))P.call(a,e)&&m(i,e,a[e]);return i};var O=(i,a,e)=>new Promise((d,l)=>{var y=c=>{try{u(e.next(c))}catch(T){l(T)}},R=c=>{try{u(e.throw(c))}catch(T){l(T)}},u=c=>c.done?d(c.value):Promise.resolve(c.value).then(y,R);u((e=e.apply(i,a)).next())});import{useEffect as A,useState as h}from"react";var b=class{constructor(a,e){this.baseUrl=a,this.headers=()=>L({"Content-Type":"application/json",Accept:"application/json"},e==null?void 0:e())}useGET(a,e){let[d,l]=h(null),[y,R]=h(null),[u,c]=h(!0),T=()=>O(this,null,function*(){var n,f,g,E,S,D;c(!0),(n=e==null?void 0:e.onLoadingStart)==null||n.call(e);let r=yield fetch(this.baseUrl+a,{headers:L(L({},(f=this.headers)==null?void 0:f.call(this)),e==null?void 0:e.headers)});if(r.status.toString().startsWith("2"))try{let s=yield r.json();l(s),(g=e==null?void 0:e.onSuccess)==null||g.call(e,s)}catch(s){let t=yield r.text();l(t),(E=e==null?void 0:e.onSuccess)==null||E.call(e,t)}else R({status:r.status,fetchResponse:r}),(S=e==null?void 0:e.onError)==null||S.call(e,{status:r.status,fetchResponse:r});c(!1),(D=e==null?void 0:e.onLoadingEnd)==null||D.call(e)});return A(()=>{T()},[]),{data:d,isError:y,isLoading:u,refetchData:T}}usePOST(a,e){let[d,l]=h(null),[y,R]=h(null),[u,c]=h(!1);return{postData:r=>O(this,null,function*(){var f,g,E,S,D,s;c(!0),(f=e==null?void 0:e.onLoadingStart)==null||f.call(e);let n=yield fetch(this.baseUrl+a,{method:"POST",headers:L(L({},(g=this.headers)==null?void 0:g.call(this)),e==null?void 0:e.headers),body:JSON.stringify(r)});if(n.status.toString().startsWith("2"))try{let t=yield n.json();l(t),(E=e==null?void 0:e.onSuccess)==null||E.call(e,t)}catch(t){let U=yield n.text();l(U),(S=e==null?void 0:e.onSuccess)==null||S.call(e,U)}else R({status:n.status,fetchResponse:n}),(D=e==null?void 0:e.onError)==null||D.call(e,{status:n.status,fetchResponse:n});c(!1),(s=e==null?void 0:e.onLoadingEnd)==null||s.call(e)}),isError:y,isLoading:u,data:d}}useDELETE(a){let[e,d]=h(null),[l,y]=h(null),[R,u]=h(!1);return{isError:l,isLoading:R,deleteData:T=>O(this,null,function*(){var n,f,g,E,S,D;u(!0),(n=a==null?void 0:a.onLoadingStart)==null||n.call(a);let r=yield fetch(this.baseUrl+T,{method:"DELETE",headers:L(L({},(f=this.headers)==null?void 0:f.call(this)),a==null?void 0:a.headers)});if(r.status.toString().startsWith("2"))try{let s=yield r.json();d(s),(g=a==null?void 0:a.onSuccess)==null||g.call(a,s)}catch(s){let t=yield r.text();d(t),(E=a==null?void 0:a.onSuccess)==null||E.call(a,t)}else y({status:r.status,fetchResponse:r}),(S=a==null?void 0:a.onError)==null||S.call(a,{status:r.status,fetchResponse:r});u(!1),(D=a==null?void 0:a.onLoadingEnd)==null||D.call(a)}),data:e}}usePATCH(a){let[e,d]=h(null),[l,y]=h(null),[R,u]=h(!1);return{patchData:(T,r)=>O(this,null,function*(){var f,g,E,S,D,s;u(!0),(f=a==null?void 0:a.onLoadingStart)==null||f.call(a);let n=yield fetch(this.baseUrl+T,{method:"PATCH",headers:L(L({},(g=this.headers)==null?void 0:g.call(this)),a==null?void 0:a.headers),body:JSON.stringify(r)});if(n.status.toString().startsWith("2"))try{let t=yield n.json();d(t),(E=a==null?void 0:a.onSuccess)==null||E.call(a,t)}catch(t){let U=yield n.text();d(U),(S=a==null?void 0:a.onSuccess)==null||S.call(a,U)}else y({status:n.status,fetchResponse:n}),(D=a==null?void 0:a.onError)==null||D.call(a,{status:n.status,fetchResponse:n});u(!1),(s=a==null?void 0:a.onLoadingEnd)==null||s.call(a)}),isError:l,isLoading:R,data:e}}},W=i=>new b(i.baseUrl,i.headers);export{W as createFetcher};
