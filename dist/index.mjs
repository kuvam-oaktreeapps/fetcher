var P=Object.defineProperty;var D=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var m=(c,n,e)=>n in c?P(c,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[n]=e,g=(c,n)=>{for(var e in n||(n={}))w.call(n,e)&&m(c,e,n[e]);if(D)for(var e of D(n))A.call(n,e)&&m(c,e,n[e]);return c};var S=(c,n,e)=>new Promise((t,u)=>{var f=r=>{try{T(e.next(r))}catch(a){u(a)}},s=r=>{try{T(e.throw(r))}catch(a){u(a)}},T=r=>r.done?t(r.value):Promise.resolve(r.value).then(f,s);T((e=e.apply(c,n)).next())});import{useEffect as C,useState as E}from"react";var U=class{constructor(n,e){this.baseUrl=n,this.headers=e}useGET(n,e){let[t,u]=E(null),[f,s]=E(null),[T,r]=E(!1),a=()=>S(this,null,function*(){var h,d,l,L,O,b;r(!0),(h=e==null?void 0:e.onLoadingStart)==null||h.call(e);let i=yield fetch(this.baseUrl+n,{headers:g(g({},(d=this.headers)==null?void 0:d.call(this)),e==null?void 0:e.headers)});if(i.status.toString().startsWith("2"))try{let R=yield i.json();u(R),(l=e==null?void 0:e.onSuccess)==null||l.call(e,R)}catch(R){let y=yield i.text();u(y),(L=e==null?void 0:e.onSuccess)==null||L.call(e,y)}else s({status:i.status,fetchResponse:i}),(O=e==null?void 0:e.onError)==null||O.call(e,{status:i.status,fetchResponse:i});r(!1),(b=e==null?void 0:e.onLoadingEnd)==null||b.call(e)});return C(()=>{a()},[]),{data:t,isError:f,isLoading:T,refetch:a}}usePOST(n,e){let[t,u]=E(null),[f,s]=E(!1);return{post:r=>S(this,null,function*(){var i,h,d,l,L;s(!0),(i=e==null?void 0:e.onLoadingStart)==null||i.call(e);let a=yield fetch(this.baseUrl+n,{method:"POST",headers:g(g({},(h=this.headers)==null?void 0:h.call(this)),e==null?void 0:e.headers),body:JSON.stringify(r)});a.status.toString().startsWith("2")?(d=e==null?void 0:e.onSuccess)==null||d.call(e):(u({status:a.status,fetchResponse:a}),(l=e==null?void 0:e.onError)==null||l.call(e,{status:a.status,fetchResponse:a})),s(!1),(L=e==null?void 0:e.onLoadingEnd)==null||L.call(e)}),isError:t,isLoading:f}}useDELETE(n,e){let[t,u]=E(null),[f,s]=E(!1);return{isError:t,isLoading:f,delete:()=>S(this,null,function*(){var a,i,h,d,l;s(!0),(a=e==null?void 0:e.onLoadingStart)==null||a.call(e);let r=yield fetch(this.baseUrl+n,{method:"DELETE",headers:g(g({},(i=this.headers)==null?void 0:i.call(this)),e==null?void 0:e.headers)});r.status.toString().startsWith("2")?(h=e==null?void 0:e.onSuccess)==null||h.call(e):(u({status:r.status,fetchResponse:r}),(d=e==null?void 0:e.onError)==null||d.call(e,{status:r.status,fetchResponse:r})),s(!1),(l=e==null?void 0:e.onLoadingEnd)==null||l.call(e)})}}usePATCH(n,e){let[t,u]=E(null),[f,s]=E(!1);return{patch:r=>S(this,null,function*(){var i,h,d,l,L;s(!0),(i=e==null?void 0:e.onLoadingStart)==null||i.call(e);let a=yield fetch(this.baseUrl+n,{method:"PATCH",headers:g(g({},(h=this.headers)==null?void 0:h.call(this)),e==null?void 0:e.headers),body:JSON.stringify(r)});a.status.toString().startsWith("2")?(d=e==null?void 0:e.onSuccess)==null||d.call(e):(u({status:a.status,fetchResponse:a}),(l=e==null?void 0:e.onError)==null||l.call(e,{status:a.status,fetchResponse:a})),s(!1),(L=e==null?void 0:e.onLoadingEnd)==null||L.call(e)}),isError:t,isLoading:f}}},x=c=>new U(c.baseUrl,c.headers);export{x as createFetcher};
