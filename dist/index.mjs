var y=Object.defineProperty;var R=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var m=(r,n,e)=>n in r?y(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e,T=(r,n)=>{for(var e in n||(n={}))D.call(n,e)&&m(r,e,n[e]);if(R)for(var e of R(n))w.call(n,e)&&m(r,e,n[e]);return r};var U=(r,n,e)=>new Promise((t,c)=>{var l=a=>{try{h(e.next(a))}catch(i){c(i)}},u=a=>{try{h(e.throw(a))}catch(i){c(i)}},h=a=>a.done?t(a.value):Promise.resolve(a.value).then(l,u);h((e=e.apply(r,n)).next())});import{useEffect as P,useState as S}from"react";var b=class{constructor(n,e){this.baseUrl=n,this.headers=e}useGET(n,e){let[t,c]=S(null),[l,u]=S(null),[h,a]=S(!1),i=()=>U(this,null,function*(){var d,f,g,E,L;a(!0),(d=e==null?void 0:e.onLoadingStart)==null||d.call(e);let s=yield fetch(this.baseUrl+n,{headers:T(T({},(f=this.headers)==null?void 0:f.call(this)),e==null?void 0:e.headers)});try{let O=yield s.json();c(O),(g=e==null?void 0:e.onSuccess)==null||g.call(e,O)}catch(O){u({status:s.status,fetchResponse:s}),(E=e==null?void 0:e.onError)==null||E.call(e,{status:s.status,fetchResponse:s})}a(!1),(L=e==null?void 0:e.onLoadingEnd)==null||L.call(e)});return P(()=>{i()},[]),{data:t,isError:l,isLoading:h,refetch:i}}usePOST(n,e){let[t,c]=S(null),[l,u]=S(!1);return{post:a=>U(this,null,function*(){var s,d,f,g,E;u(!0),(s=e==null?void 0:e.onLoadingStart)==null||s.call(e);let i=yield fetch(this.baseUrl+n,{method:"POST",headers:T(T({},(d=this.headers)==null?void 0:d.call(this)),e==null?void 0:e.headers),body:JSON.stringify(a)});i.status.toString().startsWith("2")?(f=e==null?void 0:e.onSuccess)==null||f.call(e):(c({status:i.status,fetchResponse:i}),(g=e==null?void 0:e.onError)==null||g.call(e,{status:i.status,fetchResponse:i})),u(!1),(E=e==null?void 0:e.onLoadingEnd)==null||E.call(e)}),isError:t,isLoading:l}}},k=r=>new b(r.baseUrl,r.headers);export{k as createFetcher};
