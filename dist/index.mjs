var P=Object.defineProperty;var y=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var m=(c,n,e)=>n in c?P(c,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[n]=e,g=(c,n)=>{for(var e in n||(n={}))w.call(n,e)&&m(c,e,n[e]);if(y)for(var e of y(n))A.call(n,e)&&m(c,e,n[e]);return c};var S=(c,n,e)=>new Promise((f,s)=>{var u=r=>{try{t(e.next(r))}catch(a){s(a)}},T=r=>{try{t(e.throw(r))}catch(a){s(a)}},t=r=>r.done?f(r.value):Promise.resolve(r.value).then(u,T);t((e=e.apply(c,n)).next())});import{useEffect as C,useState as E}from"react";var U=class{constructor(n,e){this.baseUrl=n,this.headers=e}useGET(n,e){let[f,s]=E(null),[u,T]=E(null),[t,r]=E(!0),a=()=>S(this,null,function*(){var h,d,l,L,D,O;r(!0),(h=e==null?void 0:e.onLoadingStart)==null||h.call(e);let i=yield fetch(this.baseUrl+n,{headers:g(g({},(d=this.headers)==null?void 0:d.call(this)),e==null?void 0:e.headers)});if(i.status.toString().startsWith("2"))try{let R=yield i.json();s(R),(l=e==null?void 0:e.onSuccess)==null||l.call(e,R)}catch(R){let b=yield i.text();s(b),(L=e==null?void 0:e.onSuccess)==null||L.call(e,b)}else T({status:i.status,fetchResponse:i}),(D=e==null?void 0:e.onError)==null||D.call(e,{status:i.status,fetchResponse:i});r(!1),(O=e==null?void 0:e.onLoadingEnd)==null||O.call(e)});return C(()=>{a()},[]),{data:f,isError:u,isLoading:t,refetchData:a}}usePOST(n,e){let[f,s]=E(null),[u,T]=E(!1);return{postData:r=>S(this,null,function*(){var i,h,d,l,L;T(!0),(i=e==null?void 0:e.onLoadingStart)==null||i.call(e);let a=yield fetch(this.baseUrl+n,{method:"POST",headers:g(g({},(h=this.headers)==null?void 0:h.call(this)),e==null?void 0:e.headers),body:JSON.stringify(r)});a.status.toString().startsWith("2")?(d=e==null?void 0:e.onSuccess)==null||d.call(e):(s({status:a.status,fetchResponse:a}),(l=e==null?void 0:e.onError)==null||l.call(e,{status:a.status,fetchResponse:a})),T(!1),(L=e==null?void 0:e.onLoadingEnd)==null||L.call(e)}),isError:f,isLoading:u}}useDELETE(n){let[e,f]=E(null),[s,u]=E(!1);return{isError:e,isLoading:s,deleteData:t=>S(this,null,function*(){var a,i,h,d,l;u(!0),(a=n==null?void 0:n.onLoadingStart)==null||a.call(n);let r=yield fetch(this.baseUrl+t,{method:"DELETE",headers:g(g({},(i=this.headers)==null?void 0:i.call(this)),n==null?void 0:n.headers)});r.status.toString().startsWith("2")?(h=n==null?void 0:n.onSuccess)==null||h.call(n):(f({status:r.status,fetchResponse:r}),(d=n==null?void 0:n.onError)==null||d.call(n,{status:r.status,fetchResponse:r})),u(!1),(l=n==null?void 0:n.onLoadingEnd)==null||l.call(n)})}}usePATCH(n){let[e,f]=E(null),[s,u]=E(!1);return{patchData:(t,r)=>S(this,null,function*(){var i,h,d,l,L;u(!0),(i=n==null?void 0:n.onLoadingStart)==null||i.call(n);let a=yield fetch(this.baseUrl+t,{method:"PATCH",headers:g(g({},(h=this.headers)==null?void 0:h.call(this)),n==null?void 0:n.headers),body:JSON.stringify(r)});a.status.toString().startsWith("2")?(d=n==null?void 0:n.onSuccess)==null||d.call(n):(f({status:a.status,fetchResponse:a}),(l=n==null?void 0:n.onError)==null||l.call(n,{status:a.status,fetchResponse:a})),u(!1),(L=n==null?void 0:n.onLoadingEnd)==null||L.call(n)}),isError:e,isLoading:s}}},x=c=>new U(c.baseUrl,c.headers);export{x as createFetcher};
