var m=Object.defineProperty;var b=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var L=(r,n,e)=>n in r?m(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e,E=(r,n)=>{for(var e in n||(n={}))y.call(n,e)&&L(r,e,n[e]);if(b)for(var e of b(n))R.call(n,e)&&L(r,e,n[e]);return r};var O=(r,n,e)=>new Promise((u,i)=>{var l=a=>{try{c(e.next(a))}catch(s){i(s)}},t=a=>{try{c(e.throw(a))}catch(s){i(s)}},c=a=>a.done?u(a.value):Promise.resolve(a.value).then(l,t);c((e=e.apply(r,n)).next())});import{useEffect as D,useState as S}from"react";var U=class{constructor(n,e){this.baseUrl=n,this.headers=e}useGET(n,e){let[u,i]=S(null),[l,t]=S(null),[c,a]=S(!1),s=()=>O(this,null,function*(){var d,f,g;a(!0),(d=e==null?void 0:e.onLoadingStart)==null||d.call(e);let h=yield fetch(this.baseUrl+n,{headers:E(E({},(f=this.headers)==null?void 0:f.call(this)),e==null?void 0:e.headers)});try{let T=yield h.json();i(T)}catch(T){t({status:h.status,fetchResponse:h})}a(!1),(g=e==null?void 0:e.onLoadingEnd)==null||g.call(e)});return D(()=>{s()},[]),{data:u,isError:l,isLoading:c,refetch:s}}usePOST(n,e){let[u,i]=S(null),[l,t]=S(!1);return{post:a=>O(this,null,function*(){var h,d,f,g,T;t(!0),(h=e==null?void 0:e.onLoadingStart)==null||h.call(e);let s=yield fetch(this.baseUrl+n,{method:"POST",headers:E(E({},(d=this.headers)==null?void 0:d.call(this)),e==null?void 0:e.headers),body:JSON.stringify(a)});s.status.toString().startsWith("2")?(f=e==null?void 0:e.onSuccess)==null||f.call(e):(i({status:s.status,fetchResponse:s}),(g=e==null?void 0:e.onError)==null||g.call(e,{status:s.status,fetchResponse:s})),t(!1),(T=e==null?void 0:e.onLoadingEnd)==null||T.call(e)}),isError:u,isLoading:l}}},G=r=>new U(r.baseUrl,r.headers);export{G as createFetcher};
